(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{k:()=>h});var t=!1;function n(e){var n=document.querySelector("h2").textContent,r=e.target.getAttribute("data-delete"),c=document.querySelector(".tasks"),a=function(e,t){return h[e].splice(t,1),localStorage.setItem("projects",JSON.stringify(h)),h[e]}(n,r);c.removeChild(c.lastChild),t=!0,document.querySelectorAll(".wrapper").forEach((function(e){e.parentNode.removeChild(e)})),o(a)}function r(e){if(0==t){var n;n="actualtaskdiv"==e.target.className?e.target:e.target.parentNode;var r=document.querySelectorAll(".descriptiondiv"),c=n.getAttribute("data-index");""==r[c].style.display||"none"==r[c].style.display?r[c].style.display="block":r[c].style.display="none"}else t=!1}function c(){var e=document.querySelector(".tasks");if(e.childNodes.length>0)for(;e.childNodes.length>0;)e.removeChild(e.firstChild)}function o(e){var t=document.querySelector(".tasks"),c=document.createElement("button"),o=document.createElement("div");for(var a in o.className="buttondiv",c.textContent="AddTask",c.className="addtaskbutton",e){var d=document.createElement("div"),i=document.createElement("div");d.className="wrapper";var u=document.createElement("div");u.className="actualtaskdiv",u.setAttribute("data-index",a);var s=document.createElement("button");for(var m in s.className="btn-close",s.setAttribute("data-delete","".concat(a)),u.addEventListener("click",r),s.addEventListener("click",n),e[a])if("description"!=m){var p=document.createElement("div");p.className="divforeachelement",p.append(e[a][m]),u.append(p,s),d.append(u)}else i.className="descriptiondiv",i.innerHTML="<span>Description: </span><p>".concat(e[a][m],"</p>");d.append(i),t.append(d)}c.addEventListener("click",l),o.append(c),t.append(o)}function a(e){document.querySelector(".todos").style.display=e}function d(e){document.querySelector(".addedtodo").style.display=e}function l(){d("none"),a("block")}function i(){document.querySelector("h2").textContent="Current",c(),o(h.Current),a("none"),d("flex")}function u(e,t){document.querySelector(".popupproject").textContent="".concat(t),document.querySelector(".popup").style.display=e}function s(){var e=document.querySelector(".burger"),t=document.querySelector(".actions"),n=document.querySelector(".projects");e.classList.toggle("toggle"),e.classList.toggle("burger-active"),t.classList.toggle("actions-active"),n.classList.toggle("project-active")}function m(e,t){var n=document.createElement("div");n.textContent="Please insert ".concat(e),n.className="alert alert-danger",document.querySelector("".concat(t)).after(n)}function p(){var e=document.querySelectorAll(".alert-danger");e.length>0&&e.forEach((function(e){e.parentNode.removeChild(e)}))}var v,f=document.querySelector(".addproject"),y=document.querySelector(".projects");function S(e){var t=document.querySelector(".projectdiv");t.parentNode.removeChild(t),f.style.display="block"}function g(){if(0==v){var e=document.querySelector("h2"),t=this.firstChild.textContent;e.textContent=t,a("none"),d("flex"),c(),o(h[t])}else v=!1}function E(){for(var e in document.querySelectorAll(".addedproject").forEach((function(e){e.parentNode.removeChild(e)})),h)if("Current"!=e){var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("button");t.innerHTML='<i class="fas fa-tasks"></i>',t.append(e),t.className="addedprojectleft",r.className="btn btn-close",r.setAttribute("data-delete",e),n.append(t,r),n.className="addedproject",y.insertBefore(n,f),n.addEventListener("click",g),r.addEventListener("click",b)}}function b(e){var t=e.target.getAttribute("data-delete");u("flex",t);var n=document.querySelector(".btnyes"),r=document.querySelector(".btnno"),c=document.querySelector(".popup__top .btn-close");n.addEventListener("click",q.bind(null,t)),c.addEventListener("click",(function(){u("none")})),r.addEventListener("click",(function(){u("none")}))}function q(e){delete h[e],localStorage.setItem("projects",JSON.stringify(h)),v=!0,u("none"),E(),i()}function N(e){var t=document.getElementById("projectinput").value;(function(e){if(p(),!(e in h))return""!=e||(m("project","#projectinput"),!1);alert("Project already exists! Try different name!")})(t)&&(!function(e){h[e]=[],localStorage.setItem("projects",JSON.stringify(h)),c(),o(h[e])}(t),document.querySelector("h2").textContent=t,S(),E(),a("none"),d("flex"))}var h={Current:[]};if(document.querySelector(".addtaskform").addEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector("#title"),n=document.querySelector("#description"),r=document.querySelector("#duedate"),l=document.querySelector("#priority"),i=document.querySelector("h2").textContent,u=function(e){var t=e.value,n=dateFns.parse(t,"MM-dd-yyyy",new Date);if(!(n<new Date))return dateFns.distanceInWordsToNow(n,new Date);alert("Invalid date! Task was already due!")}(r),s=function(e,t,n,r){p();var c=0;return""==e.value&&(m("title","#title"),c+=1),""==t.value&&(m("description","#description"),c+=1),""==n.value&&(m("date","#duedate"),c+=1),"Select value"==r.value&&(m("priority","#priority"),c+=1),c}(t,n,r,l);0==s&&(function(e,t,n,r,c){var o=function(e,t,n,r){return{title:e,description:t,duedate:n,priority:r}}(e,t,n,r);h[c].push(o),localStorage.setItem("projects",JSON.stringify(h))}(t.value,n.value,u,l.value,i),t.value="",n.value="",r.value="",l.value="Select value",function(e){a("none"),d("flex"),c(),o(h[e])}(i))}),!1),document.querySelector(".addproject").addEventListener("click",(function(e){f.style.display="none";var t=document.createElement("div"),n=document.createElement("input");n.setAttribute("placeholder","Project name");var r=document.createElement("button");r.className="btnadd",r.textContent="Add";var c=document.createElement("button");c.className="btncancel",c.textContent="Cancel";var o=document.createElement("div");o.className="btndiv",o.append(r,c),n.setAttribute("type","text"),n.setAttribute("id","projectinput"),t.className="projectdiv",t.append(n,o),y.append(t),r.addEventListener("click",N),c.addEventListener("click",S)}),!1),document.querySelector(".current").addEventListener("click",i,!1),document.querySelector(".burger").addEventListener("click",(function(){document.querySelector(".burger").addEventListener("click",s)}),!1),function(e){var t;try{t=window[e];var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}("localStorage"))if(localStorage.getItem("projects")){var k=localStorage.getItem("projects");h=JSON.parse(k),E(),o(h.Current)}else o()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVE0RyxFQUFHQSxHQUNuQkYsRUFBUUcsV0FBV0QsSUFDWixFQUNQLE1BQU96SCxHQUNQLE9BQ0VBLGFBQWEySCxlQUVELEtBQVgzSCxFQUFFNEgsTUFFVSxPQUFYNUgsRUFBRTRILE1BR1MsdUJBQVg1SCxFQUFFNkgsTUFFUywrQkFBWDdILEVBQUU2SCxPQUVKTixHQUNtQixJQUFuQkEsRUFBUXZGLFFBS1Y4RixDQUFpQixnQkFDbkIsR0FBSWxILGFBQWFtSCxRQUFRLFlBQWEsQ0FDcEMsSUFBSUMsRUFBa0JwSCxhQUFhbUgsUUFBUSxZQUMzQ3JILEVBQWlCSSxLQUFLc0YsTUFBTTRCLEdBQzVCdEQsSUFDQW5ELEVBQWNiLEVBQWMsY0FFNUJhLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9jb21wb25lbnRzL0RPTWZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9jb21wb25lbnRzL29iamVjdEZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9jb21wb25lbnRzL2Zvcm1WYWxpZGF0aW9uLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2NvbXBvbmVudHMvcHJvamVjdEZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9jb21wb25lbnRzL2hhbmRsZUZvcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyByZW1vdmVGcm9tT2JqIH0gZnJvbSBcIi4vb2JqZWN0RnVuY3Rpb25zLmpzXCI7XHJcbmltcG9ydCB7IGRpY3RPZlByb2plY3RzIH0gZnJvbSBcIi4uL2luZGV4LmpzXCI7XHJcbmxldCByZW1vdmVkRWxlbWVudCA9IGZhbHNlO1xyXG5cclxuZnVuY3Rpb24gcmVtb3ZlVG9EbyhlKSB7XHJcbiAgbGV0IHByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaDJcIikudGV4dENvbnRlbnQ7XHJcbiAgbGV0IGluZGV4ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1kZWxldGVcIik7XHJcbiAgbGV0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKTtcclxuICBsZXQgdXBkYXRlZERpY3QgPSByZW1vdmVGcm9tT2JqKHByb2plY3QsIGluZGV4KTtcclxuXHJcbiAgdGFza3MucmVtb3ZlQ2hpbGQodGFza3MubGFzdENoaWxkKTtcclxuICByZW1vdmVkRWxlbWVudCA9IHRydWU7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi53cmFwcGVyXCIpLmZvckVhY2goKHRhc2spID0+IHtcclxuICAgIGxldCBwYXJlbnQgPSB0YXNrLnBhcmVudE5vZGU7XHJcbiAgICBwYXJlbnQucmVtb3ZlQ2hpbGQodGFzayk7XHJcbiAgfSk7XHJcbiAgYWRkVGFza1RvUGFnZSh1cGRhdGVkRGljdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJvbGxEb3duKGUpIHtcclxuICBpZiAocmVtb3ZlZEVsZW1lbnQgPT0gZmFsc2UpIHtcclxuICAgIGxldCBlbGVtZW50O1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSBcImFjdHVhbHRhc2tkaXZcIikge1xyXG4gICAgICBlbGVtZW50ID0gZS50YXJnZXQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlbGVtZW50ID0gZS50YXJnZXQucGFyZW50Tm9kZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZGVzY3JpcHRpb25EaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRlc2NyaXB0aW9uZGl2XCIpO1xyXG5cclxuICAgIGxldCBpbmRleCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiKTtcclxuICAgIGlmIChcclxuICAgICAgZGVzY3JpcHRpb25EaXZbaW5kZXhdLnN0eWxlLmRpc3BsYXkgPT0gXCJcIiB8fFxyXG4gICAgICBkZXNjcmlwdGlvbkRpdltpbmRleF0uc3R5bGUuZGlzcGxheSA9PSBcIm5vbmVcIlxyXG4gICAgKSB7XHJcbiAgICAgIGRlc2NyaXB0aW9uRGl2W2luZGV4XS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGVzY3JpcHRpb25EaXZbaW5kZXhdLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgcmVtb3ZlZEVsZW1lbnQgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyVG9Eb0xpc3QoKSB7XHJcbiAgbGV0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKTtcclxuICBpZiAodGFza3MuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XHJcbiAgICB3aGlsZSAodGFza3MuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRhc2tzLnJlbW92ZUNoaWxkKHRhc2tzLmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVGFza1RvUGFnZSh0YXNrTGlzdCkge1xyXG4gIGxldCB0YXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3NcIik7XHJcbiAgbGV0IGFkZFRhc2tCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGxldCBidXR0b25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGJ1dHRvbkRpdi5jbGFzc05hbWUgPSBcImJ1dHRvbmRpdlwiO1xyXG4gIGFkZFRhc2tCdXR0b24udGV4dENvbnRlbnQgPSBcIkFkZFRhc2tcIjtcclxuICBhZGRUYXNrQnV0dG9uLmNsYXNzTmFtZSA9IFwiYWRkdGFza2J1dHRvblwiO1xyXG4gIGZvciAobGV0IGkgaW4gdGFza0xpc3QpIHtcclxuICAgIGxldCB3cmFwcGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGxldCBkZXNjcmlwdGlvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICB3cmFwcGVyRGl2LmNsYXNzTmFtZSA9IFwid3JhcHBlclwiO1xyXG4gICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBkaXYuY2xhc3NOYW1lID0gXCJhY3R1YWx0YXNrZGl2XCI7XHJcbiAgICBkaXYuc2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiLCBpKTtcclxuICAgIGxldCBjbG9zZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBjbG9zZUJ0bi5jbGFzc05hbWUgPSBcImJ0bi1jbG9zZVwiO1xyXG4gICAgY2xvc2VCdG4uc2V0QXR0cmlidXRlKFwiZGF0YS1kZWxldGVcIiwgYCR7aX1gKTtcclxuXHJcbiAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJvbGxEb3duKTtcclxuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW1vdmVUb0RvKTtcclxuICAgIGZvciAobGV0IGogaW4gdGFza0xpc3RbaV0pIHtcclxuICAgICAgaWYgKGogIT0gXCJkZXNjcmlwdGlvblwiKSB7XHJcbiAgICAgICAgbGV0IGRpdkZvckVhY2hFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBkaXZGb3JFYWNoRWxlbWVudC5jbGFzc05hbWUgPSBcImRpdmZvcmVhY2hlbGVtZW50XCI7XHJcbiAgICAgICAgZGl2Rm9yRWFjaEVsZW1lbnQuYXBwZW5kKHRhc2tMaXN0W2ldW2pdKTtcclxuICAgICAgICBkaXYuYXBwZW5kKGRpdkZvckVhY2hFbGVtZW50LCBjbG9zZUJ0bik7XHJcbiAgICAgICAgd3JhcHBlckRpdi5hcHBlbmQoZGl2KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkZXNjcmlwdGlvbkRpdi5jbGFzc05hbWUgPSBcImRlc2NyaXB0aW9uZGl2XCI7XHJcbiAgICAgICAgZGVzY3JpcHRpb25EaXYuaW5uZXJIVE1MID0gYDxzcGFuPkRlc2NyaXB0aW9uOiA8L3NwYW4+PHA+JHt0YXNrTGlzdFtpXVtqXX08L3A+YDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgd3JhcHBlckRpdi5hcHBlbmQoZGVzY3JpcHRpb25EaXYpO1xyXG4gICAgdGFza3MuYXBwZW5kKHdyYXBwZXJEaXYpO1xyXG4gIH1cclxuICBhZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoaWRlVGFza3MpO1xyXG4gIGJ1dHRvbkRpdi5hcHBlbmQoYWRkVGFza0J1dHRvbik7XHJcbiAgdGFza3MuYXBwZW5kKGJ1dHRvbkRpdik7XHJcbn1cclxuXHJcbi8vIC0tLS0tLy9cclxuXHJcbmZ1bmN0aW9uIGRpc3BsYXlPckhpZGVGb3JtKGFjdGlvbikge1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb3NcIikuc3R5bGUuZGlzcGxheSA9IGFjdGlvbjtcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzcGxheU9ySGlkZVRvRG8oYWN0aW9uKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRlZHRvZG9cIikuc3R5bGUuZGlzcGxheSA9IGFjdGlvbjtcclxufVxyXG5cclxuZnVuY3Rpb24gaGlkZVRhc2tzKCkge1xyXG4gIGRpc3BsYXlPckhpZGVUb0RvKFwibm9uZVwiKTtcclxuICBkaXNwbGF5T3JIaWRlRm9ybShcImJsb2NrXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5Q3VycmVudFRhc2tzKCkge1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMlwiKS50ZXh0Q29udGVudCA9IFwiQ3VycmVudFwiO1xyXG4gIGNsZWFyVG9Eb0xpc3QoKTtcclxuICBhZGRUYXNrVG9QYWdlKGRpY3RPZlByb2plY3RzW1wiQ3VycmVudFwiXSk7XHJcbiAgZGlzcGxheU9ySGlkZUZvcm0oXCJub25lXCIpO1xyXG4gIGRpc3BsYXlPckhpZGVUb0RvKFwiZmxleFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUG9wVXAoYWN0aW9uLCBrZXkpIHtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwcHJvamVjdFwiKS50ZXh0Q29udGVudCA9IGAke2tleX1gO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIikuc3R5bGUuZGlzcGxheSA9IGFjdGlvbjtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlQ2xhc3NlcygpIHtcclxuICBjb25zdCBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlclwiKTtcclxuICBjb25zdCBhY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY3Rpb25zXCIpO1xyXG4gIGNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKTtcclxuICBidXJnZXIuY2xhc3NMaXN0LnRvZ2dsZShcInRvZ2dsZVwiKTtcclxuICBidXJnZXIuY2xhc3NMaXN0LnRvZ2dsZShcImJ1cmdlci1hY3RpdmVcIik7XHJcbiAgYWN0aW9ucy5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aW9ucy1hY3RpdmVcIik7XHJcbiAgcHJvamVjdHMuY2xhc3NMaXN0LnRvZ2dsZShcInByb2plY3QtYWN0aXZlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVCdXJnZXJCdXR0b24oKSB7XHJcbiAgY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbiAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVDbGFzc2VzKTtcclxufVxyXG5cclxuLy8tLS8vXHJcblxyXG5leHBvcnQge1xyXG4gIGRpc3BsYXlPckhpZGVGb3JtLFxyXG4gIGFkZFRhc2tUb1BhZ2UsXHJcbiAgZGlzcGxheU9ySGlkZVRvRG8sXHJcbiAgY2xlYXJUb0RvTGlzdCxcclxuICBkaXNwbGF5Q3VycmVudFRhc2tzLFxyXG4gIGhhbmRsZVBvcFVwLFxyXG4gIHRvZ2dsZUJ1cmdlckJ1dHRvbixcclxufTtcclxuIiwiaW1wb3J0IHsgZGljdE9mUHJvamVjdHMgfSBmcm9tIFwiLi4vaW5kZXguanNcIjtcclxuXHJcbi8vIENyZWF0ZSBvYmplY3QgZnJvbSB2YWx1ZXMgZnJvbSBGb3JtLCBhZGQgdGhlbSB0byB0aGUgbGlzdFxyXG5mdW5jdGlvbiBjcmVhdGVPYmplY3QodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVkYXRlLCBwcmlvcml0eSkge1xyXG4gIHJldHVybiB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlZGF0ZSwgcHJpb3JpdHkgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9kb09iaih0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZWRhdGUsIHByaW9yaXR5LCB3aGljaFByb2plY3QpIHtcclxuICBsZXQgb2JqID0gY3JlYXRlT2JqZWN0KHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlZGF0ZSwgcHJpb3JpdHkpO1xyXG4gIGRpY3RPZlByb2plY3RzW3doaWNoUHJvamVjdF0ucHVzaChvYmopO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoZGljdE9mUHJvamVjdHMpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlRnJvbU9iaihwcm9qZWN0LCBpbmRleCkge1xyXG4gIGRpY3RPZlByb2plY3RzW3Byb2plY3RdLnNwbGljZShpbmRleCwgMSk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShkaWN0T2ZQcm9qZWN0cykpO1xyXG4gIHJldHVybiBkaWN0T2ZQcm9qZWN0c1twcm9qZWN0XTtcclxufVxyXG5cclxuZXhwb3J0IHsgdG9kb09iaiwgcmVtb3ZlRnJvbU9iaiB9O1xyXG4iLCJpbXBvcnQgeyBkaWN0T2ZQcm9qZWN0cyB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xyXG4vLyBWYWxpZGF0aW9uIG9mIEZvcm0sIGFuZCBkaXNwbGF5aW5nIGFuZCByZW1vdmluZyBhbGVydC1kYW5nZXIgZGl2XHJcblxyXG5mdW5jdGlvbiBhZGRXYXJuaW5nKG5vZGVOYW1lLCBzZWxlY3Rvcikge1xyXG4gIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRpdi50ZXh0Q29udGVudCA9IGBQbGVhc2UgaW5zZXJ0ICR7bm9kZU5hbWV9YDtcclxuICBkaXYuY2xhc3NOYW1lID0gXCJhbGVydCBhbGVydC1kYW5nZXJcIjtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3NlbGVjdG9yfWApLmFmdGVyKGRpdik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlUHJvamVjdEZvcm0ocHJvamVjdElucHV0KSB7XHJcbiAgY2hlY2tJZkRhbmdlckRpc3BsYXllZCgpO1xyXG4gIGlmIChwcm9qZWN0SW5wdXQgaW4gZGljdE9mUHJvamVjdHMpIHtcclxuICAgIGFsZXJ0KFwiUHJvamVjdCBhbHJlYWR5IGV4aXN0cyEgVHJ5IGRpZmZlcmVudCBuYW1lIVwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYgKHByb2plY3RJbnB1dCA9PSBcIlwiKSB7XHJcbiAgICBhZGRXYXJuaW5nKFwicHJvamVjdFwiLCBcIiNwcm9qZWN0aW5wdXRcIik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0lmRGFuZ2VyRGlzcGxheWVkKCkge1xyXG4gIGxldCBkYW5nZXJBbHJlYWR5RGlzcGxheWVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbGVydC1kYW5nZXJcIik7XHJcbiAgaWYgKGRhbmdlckFscmVhZHlEaXNwbGF5ZWQubGVuZ3RoID4gMCkge1xyXG4gICAgZGFuZ2VyQWxyZWFkeURpc3BsYXllZC5mb3JFYWNoKChkaXYpID0+IHtcclxuICAgICAgZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGl2KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVEYXRhKHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpIHtcclxuICBjaGVja0lmRGFuZ2VyRGlzcGxheWVkKCk7XHJcblxyXG4gIGxldCBpbnZhbGlkID0gMDtcclxuICBpZiAodGl0bGUudmFsdWUgPT0gXCJcIikge1xyXG4gICAgYWRkV2FybmluZyhcInRpdGxlXCIsIFwiI3RpdGxlXCIpO1xyXG4gICAgaW52YWxpZCArPSAxO1xyXG4gIH1cclxuICBpZiAoZGVzY3JpcHRpb24udmFsdWUgPT0gXCJcIikge1xyXG4gICAgYWRkV2FybmluZyhcImRlc2NyaXB0aW9uXCIsIFwiI2Rlc2NyaXB0aW9uXCIpO1xyXG4gICAgaW52YWxpZCArPSAxO1xyXG4gIH1cclxuICBpZiAoZGF0ZS52YWx1ZSA9PSBcIlwiKSB7XHJcbiAgICBhZGRXYXJuaW5nKFwiZGF0ZVwiLCBcIiNkdWVkYXRlXCIpO1xyXG4gICAgaW52YWxpZCArPSAxO1xyXG4gIH1cclxuICBpZiAocHJpb3JpdHkudmFsdWUgPT0gXCJTZWxlY3QgdmFsdWVcIikge1xyXG4gICAgYWRkV2FybmluZyhcInByaW9yaXR5XCIsIFwiI3ByaW9yaXR5XCIpO1xyXG4gICAgaW52YWxpZCArPSAxO1xyXG4gIH1cclxuICByZXR1cm4gaW52YWxpZDtcclxufVxyXG5cclxuZXhwb3J0IHsgdmFsaWRhdGVEYXRhLCB2YWxpZGF0ZVByb2plY3RGb3JtIH07XHJcbiIsImltcG9ydCB7IHZhbGlkYXRlUHJvamVjdEZvcm0gfSBmcm9tIFwiLi9mb3JtVmFsaWRhdGlvbi5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGFkZFRhc2tUb1BhZ2UsXHJcbiAgZGlzcGxheU9ySGlkZUZvcm0sXHJcbiAgZGlzcGxheU9ySGlkZVRvRG8sXHJcbiAgY2xlYXJUb0RvTGlzdCxcclxuICBkaXNwbGF5Q3VycmVudFRhc2tzLFxyXG4gIGhhbmRsZVBvcFVwLFxyXG59IGZyb20gXCIuL0RPTWZ1bmN0aW9ucy5qc1wiO1xyXG5pbXBvcnQgeyBkaWN0T2ZQcm9qZWN0cyB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xyXG5cclxubGV0IGFkZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZHByb2plY3RcIik7XHJcbmxldCBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIik7XHJcblxyXG5mdW5jdGlvbiBoaWRlQWRkUHJvamVjdChlKSB7XHJcbiAgbGV0IHByb2plY3RkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RkaXZcIik7XHJcbiAgcHJvamVjdGRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHByb2plY3RkaXYpO1xyXG4gIGFkZFByb2plY3Quc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTGlzdChwcm9qZWN0TmFtZSkge1xyXG4gIGRpY3RPZlByb2plY3RzW3Byb2plY3ROYW1lXSA9IFtdO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoZGljdE9mUHJvamVjdHMpKTtcclxuICBjbGVhclRvRG9MaXN0KCk7XHJcbiAgYWRkVGFza1RvUGFnZShkaWN0T2ZQcm9qZWN0c1twcm9qZWN0TmFtZV0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93VGFza3NJblByb2plY3QoKSB7XHJcbiAgaWYgKHJlbW92ZWRQcm9qZWN0ID09IGZhbHNlKSB7XHJcbiAgICBsZXQgbmFtZU9mUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMlwiKTtcclxuICAgIGxldCBwcm9qZWN0TmFtZSA9IHRoaXMuZmlyc3RDaGlsZC50ZXh0Q29udGVudDtcclxuICAgIG5hbWVPZlByb2plY3QudGV4dENvbnRlbnQgPSBwcm9qZWN0TmFtZTtcclxuICAgIGRpc3BsYXlPckhpZGVGb3JtKFwibm9uZVwiKTtcclxuICAgIGRpc3BsYXlPckhpZGVUb0RvKFwiZmxleFwiKTtcclxuICAgIGNsZWFyVG9Eb0xpc3QoKTtcclxuICAgIGFkZFRhc2tUb1BhZ2UoZGljdE9mUHJvamVjdHNbcHJvamVjdE5hbWVdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVtb3ZlZFByb2plY3QgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIHRoaXMgc2hvd3MgYWxsIHByb2plY3RzIGluIHRoZSBzaWRlYmFyXHJcbmZ1bmN0aW9uIHNob3dQcm9qZWN0cygpIHtcclxuICByZW1vdmVQcm9qZWN0c0Zyb21ET00oKTtcclxuICBmb3IgKGxldCBrZXkgaW4gZGljdE9mUHJvamVjdHMpIHtcclxuICAgIGlmIChrZXkgIT0gXCJDdXJyZW50XCIpIHtcclxuICAgICAgbGV0IGFkZGVkUHJvamVjdExlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBsZXQgYWRkZWRQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgbGV0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgIGFkZGVkUHJvamVjdExlZnQuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmFzIGZhLXRhc2tzXCI+PC9pPmA7XHJcbiAgICAgIGFkZGVkUHJvamVjdExlZnQuYXBwZW5kKGtleSk7XHJcbiAgICAgIGFkZGVkUHJvamVjdExlZnQuY2xhc3NOYW1lID0gXCJhZGRlZHByb2plY3RsZWZ0XCI7XHJcbiAgICAgIGJ0bi5jbGFzc05hbWUgPSBcImJ0biBidG4tY2xvc2VcIjtcclxuICAgICAgYnRuLnNldEF0dHJpYnV0ZShcImRhdGEtZGVsZXRlXCIsIGtleSk7XHJcbiAgICAgIGFkZGVkUHJvamVjdC5hcHBlbmQoYWRkZWRQcm9qZWN0TGVmdCwgYnRuKTtcclxuICAgICAgYWRkZWRQcm9qZWN0LmNsYXNzTmFtZSA9IFwiYWRkZWRwcm9qZWN0XCI7XHJcbiAgICAgIHByb2plY3RzLmluc2VydEJlZm9yZShhZGRlZFByb2plY3QsIGFkZFByb2plY3QpO1xyXG4gICAgICBhZGRlZFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dUYXNrc0luUHJvamVjdCk7XHJcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGlzcGF5UG9wVXApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxubGV0IHJlbW92ZWRQcm9qZWN0O1xyXG4vL3RoaXMgZnVuY3Rpb24gZGVsZXRlIHRvZG8gb2JqIGZyb20gcHJvamVjdCBvYmpcclxuZnVuY3Rpb24gZGlzcGF5UG9wVXAoZSkge1xyXG4gIGxldCBrZXkgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWRlbGV0ZVwiKTtcclxuICBoYW5kbGVQb3BVcChcImZsZXhcIiwga2V5KTtcclxuICBsZXQgYnRuWWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG55ZXNcIik7XHJcbiAgbGV0IGJ0bk5vID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5ub1wiKTtcclxuICBsZXQgYnRuQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190b3AgLmJ0bi1jbG9zZVwiKTtcclxuXHJcbiAgYnRuWWVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZWxldGVGcm9tT2JqRGljdC5iaW5kKG51bGwsIGtleSkpO1xyXG5cclxuICBidG5DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaGFuZGxlUG9wVXAoXCJub25lXCIpO1xyXG4gIH0pO1xyXG5cclxuICBidG5Oby5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgaGFuZGxlUG9wVXAoXCJub25lXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVGcm9tT2JqRGljdChrZXkpIHtcclxuICBkZWxldGUgZGljdE9mUHJvamVjdHNba2V5XTtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGRpY3RPZlByb2plY3RzKSk7XHJcbiAgcmVtb3ZlZFByb2plY3QgPSB0cnVlO1xyXG4gIGhhbmRsZVBvcFVwKFwibm9uZVwiKTtcclxuICBzaG93UHJvamVjdHMoKTtcclxuICBkaXNwbGF5Q3VycmVudFRhc2tzKCk7XHJcbn1cclxuXHJcbi8vIHRoaXMgZnVuY3Rpb24gcmVtb3ZlcyBwcm9qZWN0IGZyb20gRE9NXHJcbmZ1bmN0aW9uIHJlbW92ZVByb2plY3RzRnJvbURPTSgpIHtcclxuICBsZXQgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFkZGVkcHJvamVjdFwiKTtcclxuICBwcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XHJcbiAgICBwcm9qZWN0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocHJvamVjdCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFByb2plY3RUb0RPTShlKSB7XHJcbiAgbGV0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0aW5wdXRcIikudmFsdWU7XHJcbiAgaWYgKHZhbGlkYXRlUHJvamVjdEZvcm0ocHJvamVjdE5hbWUpKSB7XHJcbiAgICBjcmVhdGVMaXN0KHByb2plY3ROYW1lKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMlwiKS50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xyXG4gICAgaGlkZUFkZFByb2plY3QoKTtcclxuICAgIHNob3dQcm9qZWN0cygpO1xyXG4gICAgZGlzcGxheU9ySGlkZUZvcm0oXCJub25lXCIpO1xyXG4gICAgZGlzcGxheU9ySGlkZVRvRG8oXCJmbGV4XCIpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gVGhpcyBmdW5jdGlvbiBpcyBzaG93aW5nIHRoYXQgYWRkIHByb2plY3QgZm9ybSBvbiB0aGUgc2lkZVxyXG5mdW5jdGlvbiBhZGRRdWVyeShlKSB7XHJcbiAgYWRkUHJvamVjdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gIGxldCBkaXZQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBsZXQgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgaW5wdXQuc2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgXCJQcm9qZWN0IG5hbWVcIik7XHJcblxyXG4gIGxldCBidG5BZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGJ0bkFkZC5jbGFzc05hbWUgPSBcImJ0bmFkZFwiO1xyXG4gIGJ0bkFkZC50ZXh0Q29udGVudCA9IFwiQWRkXCI7XHJcbiAgbGV0IGJ0bkNhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnRuQ2FuY2VsLmNsYXNzTmFtZSA9IFwiYnRuY2FuY2VsXCI7XHJcbiAgYnRuQ2FuY2VsLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcclxuICBsZXQgYnRuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBidG5EaXYuY2xhc3NOYW1lID0gXCJidG5kaXZcIjtcclxuICBidG5EaXYuYXBwZW5kKGJ0bkFkZCwgYnRuQ2FuY2VsKTtcclxuXHJcbiAgaW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XHJcbiAgaW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0aW5wdXRcIik7XHJcblxyXG4gIGRpdlByb2plY3QuY2xhc3NOYW1lID0gXCJwcm9qZWN0ZGl2XCI7XHJcbiAgZGl2UHJvamVjdC5hcHBlbmQoaW5wdXQsIGJ0bkRpdik7XHJcbiAgcHJvamVjdHMuYXBwZW5kKGRpdlByb2plY3QpO1xyXG4gIGJ0bkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkUHJvamVjdFRvRE9NKTtcclxuICBidG5DYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhpZGVBZGRQcm9qZWN0KTtcclxufVxyXG5cclxuZXhwb3J0IHsgYWRkUXVlcnksIHNob3dQcm9qZWN0cyB9O1xyXG4iLCIvLyBpbXBvcnQgXCIuL3N0eWxlLmNzc1wiO1xyXG5pbXBvcnQgeyBnZXRWYWx1ZXMgfSBmcm9tIFwiLi9jb21wb25lbnRzL2hhbmRsZUZvcm0uanNcIjtcclxuaW1wb3J0IHsgYWRkUXVlcnkgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Byb2plY3RGdW5jdGlvbnMuanNcIjtcclxuaW1wb3J0IHtcclxuICBkaXNwbGF5Q3VycmVudFRhc2tzLFxyXG4gIGFkZFRhc2tUb1BhZ2UsXHJcbiAgdG9nZ2xlQnVyZ2VyQnV0dG9uLFxyXG59IGZyb20gXCIuL2NvbXBvbmVudHMvRE9NZnVuY3Rpb25zLmpzXCI7XHJcbmltcG9ydCB7IHNob3dQcm9qZWN0cyB9IGZyb20gXCIuL2NvbXBvbmVudHMvcHJvamVjdEZ1bmN0aW9ucy5qc1wiO1xyXG5pbXBvcnQgXCIuL3N0eWxlLmNzc1wiO1xyXG5cclxubGV0IGRpY3RPZlByb2plY3RzID0ge307XHJcbmRpY3RPZlByb2plY3RzW1wiQ3VycmVudFwiXSA9IFtdO1xyXG5sZXQgYWRkdGFza2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZHRhc2tmb3JtXCIpO1xyXG5hZGR0YXNrZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGdldFZhbHVlcywgZmFsc2UpO1xyXG5cclxubGV0IGFkZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZHByb2plY3RcIik7XHJcbmFkZFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFkZFF1ZXJ5LCBmYWxzZSk7XHJcblxyXG5sZXQgY3VycmVudFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmN1cnJlbnRcIik7XHJcbmN1cnJlbnRUYXNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkaXNwbGF5Q3VycmVudFRhc2tzLCBmYWxzZSk7XHJcblxyXG5sZXQgYnVyZ2VyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbmJ1cmdlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlQnVyZ2VyQnV0dG9uLCBmYWxzZSk7XHJcblxyXG5mdW5jdGlvbiBzdG9yYWdlQXZhaWxhYmxlKHR5cGUpIHtcclxuICB2YXIgc3RvcmFnZTtcclxuICB0cnkge1xyXG4gICAgc3RvcmFnZSA9IHdpbmRvd1t0eXBlXTtcclxuICAgIHZhciB4ID0gXCJfX3N0b3JhZ2VfdGVzdF9fXCI7XHJcbiAgICBzdG9yYWdlLnNldEl0ZW0oeCwgeCk7XHJcbiAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBlIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uICYmXHJcbiAgICAgIC8vIGV2ZXJ5dGhpbmcgZXhjZXB0IEZpcmVmb3hcclxuICAgICAgKGUuY29kZSA9PT0gMjIgfHxcclxuICAgICAgICAvLyBGaXJlZm94XHJcbiAgICAgICAgZS5jb2RlID09PSAxMDE0IHx8XHJcbiAgICAgICAgLy8gdGVzdCBuYW1lIGZpZWxkIHRvbywgYmVjYXVzZSBjb2RlIG1pZ2h0IG5vdCBiZSBwcmVzZW50XHJcbiAgICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxyXG4gICAgICAgIGUubmFtZSA9PT0gXCJRdW90YUV4Y2VlZGVkRXJyb3JcIiB8fFxyXG4gICAgICAgIC8vIEZpcmVmb3hcclxuICAgICAgICBlLm5hbWUgPT09IFwiTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRURcIikgJiZcclxuICAgICAgLy8gYWNrbm93bGVkZ2UgUXVvdGFFeGNlZWRlZEVycm9yIG9ubHkgaWYgdGhlcmUncyBzb21ldGhpbmcgYWxyZWFkeSBzdG9yZWRcclxuICAgICAgc3RvcmFnZSAmJlxyXG4gICAgICBzdG9yYWdlLmxlbmd0aCAhPT0gMFxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmlmIChzdG9yYWdlQXZhaWxhYmxlKFwibG9jYWxTdG9yYWdlXCIpKSB7XHJcbiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHJvamVjdHNcIikpIHtcclxuICAgIGxldCByZXRyaWV2ZWRPYmplY3QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RzXCIpO1xyXG4gICAgZGljdE9mUHJvamVjdHMgPSBKU09OLnBhcnNlKHJldHJpZXZlZE9iamVjdCk7XHJcbiAgICBzaG93UHJvamVjdHMoZGljdE9mUHJvamVjdHMpO1xyXG4gICAgYWRkVGFza1RvUGFnZShkaWN0T2ZQcm9qZWN0c1tcIkN1cnJlbnRcIl0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhZGRUYXNrVG9QYWdlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBkaWN0T2ZQcm9qZWN0cyB9O1xyXG4iLCJpbXBvcnQgeyB0b2RvT2JqIH0gZnJvbSBcIi4vb2JqZWN0RnVuY3Rpb25zLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgZGlzcGxheU9ySGlkZUZvcm0sXHJcbiAgYWRkVGFza1RvUGFnZSxcclxuICBkaXNwbGF5T3JIaWRlVG9EbyxcclxuICBjbGVhclRvRG9MaXN0LFxyXG59IGZyb20gXCIuL0RPTWZ1bmN0aW9ucy5qc1wiO1xyXG5pbXBvcnQgeyBkaWN0T2ZQcm9qZWN0cyB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xyXG5pbXBvcnQgeyB2YWxpZGF0ZURhdGEgfSBmcm9tIFwiLi9mb3JtVmFsaWRhdGlvbi5qc1wiO1xyXG5cclxuZnVuY3Rpb24gY2FsbERPTWZ1bmN0aW9ucyhwcm9qZWN0TmFtZSkge1xyXG4gIGRpc3BsYXlPckhpZGVGb3JtKFwibm9uZVwiKTtcclxuICBkaXNwbGF5T3JIaWRlVG9EbyhcImZsZXhcIik7XHJcbiAgY2xlYXJUb0RvTGlzdCgpO1xyXG5cclxuICBhZGRUYXNrVG9QYWdlKGRpY3RPZlByb2plY3RzW3Byb2plY3ROYW1lXSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURhdGUoZHVlRGF0ZSkge1xyXG4gIGxldCBzZWxlY3RlZERhdGUgPSBkdWVEYXRlLnZhbHVlO1xyXG4gIGNvbnN0IGRhdGUgPSBkYXRlRm5zLnBhcnNlKHNlbGVjdGVkRGF0ZSwgXCJNTS1kZC15eXl5XCIsIG5ldyBEYXRlKCkpO1xyXG4gIGlmIChkYXRlIDwgbmV3IERhdGUoKSkge1xyXG4gICAgYWxlcnQoXCJJbnZhbGlkIGRhdGUhIFRhc2sgd2FzIGFscmVhZHkgZHVlIVwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgcmVzdWx0ID0gZGF0ZUZucy5kaXN0YW5jZUluV29yZHNUb05vdyhkYXRlLCBuZXcgRGF0ZSgpKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRWYWx1ZXMoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpO1xyXG4gIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIik7XHJcbiAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2R1ZWRhdGVcIik7XHJcbiAgbGV0IHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmlvcml0eVwiKTtcclxuICBsZXQgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaDJcIikudGV4dENvbnRlbnQ7XHJcblxyXG4gIC8vIENyZWF0ZSBvYmplY3QgZnJvbSB0aGVzZSB2YWx1ZXMgYW5kIGFkZCB0aGVtIHRvIHRoZSBsaXN0XHJcbiAgbGV0IGRhdGUgPSBoYW5kbGVEYXRlKGR1ZURhdGUpO1xyXG4gIGxldCBpbnZhbGlkID0gdmFsaWRhdGVEYXRhKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgc2VsZWN0ZWQpO1xyXG4gIGlmIChpbnZhbGlkID09IDApIHtcclxuICAgIHRvZG9PYmoodGl0bGUudmFsdWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBkYXRlLCBzZWxlY3RlZC52YWx1ZSwgcHJvamVjdE5hbWUpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB0aXRsZS52YWx1ZSA9IFwiXCI7XHJcbiAgZGVzY3JpcHRpb24udmFsdWUgPSBcIlwiO1xyXG4gIGR1ZURhdGUudmFsdWUgPSBcIlwiO1xyXG4gIHNlbGVjdGVkLnZhbHVlID0gXCJTZWxlY3QgdmFsdWVcIjtcclxuICBjYWxsRE9NZnVuY3Rpb25zKHByb2plY3ROYW1lKTtcclxufVxyXG5cclxuZXhwb3J0IHsgZ2V0VmFsdWVzIH07XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInJlbW92ZWRFbGVtZW50IiwicmVtb3ZlVG9EbyIsImUiLCJwcm9qZWN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJpbmRleCIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsInRhc2tzIiwidXBkYXRlZERpY3QiLCJkaWN0T2ZQcm9qZWN0cyIsInNwbGljZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicmVtb3ZlRnJvbU9iaiIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ0YXNrIiwicGFyZW50Tm9kZSIsImFkZFRhc2tUb1BhZ2UiLCJyb2xsRG93biIsImVsZW1lbnQiLCJjbGFzc05hbWUiLCJkZXNjcmlwdGlvbkRpdiIsInN0eWxlIiwiZGlzcGxheSIsImNsZWFyVG9Eb0xpc3QiLCJjaGlsZE5vZGVzIiwibGVuZ3RoIiwiZmlyc3RDaGlsZCIsInRhc2tMaXN0IiwiYWRkVGFza0J1dHRvbiIsImNyZWF0ZUVsZW1lbnQiLCJidXR0b25EaXYiLCJpIiwid3JhcHBlckRpdiIsImRpdiIsInNldEF0dHJpYnV0ZSIsImNsb3NlQnRuIiwiaiIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXZGb3JFYWNoRWxlbWVudCIsImFwcGVuZCIsImlubmVySFRNTCIsImhpZGVUYXNrcyIsImRpc3BsYXlPckhpZGVGb3JtIiwiYWN0aW9uIiwiZGlzcGxheU9ySGlkZVRvRG8iLCJkaXNwbGF5Q3VycmVudFRhc2tzIiwiaGFuZGxlUG9wVXAiLCJ0b2dnbGVDbGFzc2VzIiwiYnVyZ2VyIiwiYWN0aW9ucyIsInByb2plY3RzIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYWRkV2FybmluZyIsIm5vZGVOYW1lIiwic2VsZWN0b3IiLCJhZnRlciIsImNoZWNrSWZEYW5nZXJEaXNwbGF5ZWQiLCJkYW5nZXJBbHJlYWR5RGlzcGxheWVkIiwicmVtb3ZlZFByb2plY3QiLCJhZGRQcm9qZWN0IiwiaGlkZUFkZFByb2plY3QiLCJwcm9qZWN0ZGl2Iiwic2hvd1Rhc2tzSW5Qcm9qZWN0IiwibmFtZU9mUHJvamVjdCIsInByb2plY3ROYW1lIiwidGhpcyIsInNob3dQcm9qZWN0cyIsImFkZGVkUHJvamVjdExlZnQiLCJhZGRlZFByb2plY3QiLCJidG4iLCJpbnNlcnRCZWZvcmUiLCJkaXNwYXlQb3BVcCIsImJ0blllcyIsImJ0bk5vIiwiYnRuQ2xvc2UiLCJkZWxldGVGcm9tT2JqRGljdCIsImJpbmQiLCJhZGRQcm9qZWN0VG9ET00iLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwicHJvamVjdElucHV0IiwiYWxlcnQiLCJ2YWxpZGF0ZVByb2plY3RGb3JtIiwiY3JlYXRlTGlzdCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJzZWxlY3RlZCIsImRhdGUiLCJzZWxlY3RlZERhdGUiLCJkYXRlRm5zIiwicGFyc2UiLCJEYXRlIiwiZGlzdGFuY2VJbldvcmRzVG9Ob3ciLCJoYW5kbGVEYXRlIiwiaW52YWxpZCIsInByaW9yaXR5IiwidmFsaWRhdGVEYXRhIiwiZHVlZGF0ZSIsIndoaWNoUHJvamVjdCIsImNyZWF0ZU9iamVjdCIsInB1c2giLCJ0b2RvT2JqIiwiY2FsbERPTWZ1bmN0aW9ucyIsImRpdlByb2plY3QiLCJpbnB1dCIsImJ0bkFkZCIsImJ0bkNhbmNlbCIsImJ0bkRpdiIsInR5cGUiLCJzdG9yYWdlIiwid2luZG93IiwieCIsInJlbW92ZUl0ZW0iLCJET01FeGNlcHRpb24iLCJjb2RlIiwibmFtZSIsInN0b3JhZ2VBdmFpbGFibGUiLCJnZXRJdGVtIiwicmV0cmlldmVkT2JqZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==
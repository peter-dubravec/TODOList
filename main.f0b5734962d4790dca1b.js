(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{k:()=>h});let t=!1;function n(e){let n=document.querySelector("h2").textContent,o=e.target.getAttribute("data-delete"),r=document.querySelector(".tasks"),l=function(e,t){return h[e].splice(t,1),localStorage.setItem("projects",JSON.stringify(h)),h[e]}(n,o);r.removeChild(r.lastChild),t=!0,document.querySelectorAll(".wrapper").forEach((e=>{e.parentNode.removeChild(e)})),c(l)}function o(e){if(0==t){let t;t="actualtaskdiv"==e.target.className?e.target:e.target.parentNode;let n=document.querySelectorAll(".descriptiondiv"),o=t.getAttribute("data-index");""==n[o].style.display||"none"==n[o].style.display?n[o].style.display="block":n[o].style.display="none"}else t=!1}function r(){let e=document.querySelector(".tasks");if(e.childNodes.length>0)for(;e.childNodes.length>0;)e.removeChild(e.firstChild)}function c(e){let t=document.querySelector(".tasks"),r=document.createElement("button"),c=document.createElement("div");c.className="buttondiv",r.textContent="AddTask",r.className="addtaskbutton";for(let r in e){let c=document.createElement("div"),l=document.createElement("div");c.className="wrapper";let a=document.createElement("div");a.className="actualtaskdiv",a.setAttribute("data-index",r);let d=document.createElement("button");d.className="btn-close",d.setAttribute("data-delete",`${r}`),a.addEventListener("click",o),d.addEventListener("click",n);for(let t in e[r])if("description"!=t){let n=document.createElement("div");n.className="divforeachelement",n.append(e[r][t]),a.append(n,d),c.append(a)}else l.className="descriptiondiv",l.innerHTML=`<span>Description: </span><p>${e[r][t]}</p>`;c.append(l),t.append(c)}r.addEventListener("click",d),c.append(r),t.append(c)}function l(e){document.querySelector(".todos").style.display=e}function a(e){document.querySelector(".addedtodo").style.display=e}function d(){a("none"),l("block")}function i(){document.querySelector("h2").textContent="Current",r(),c(h.Current),l("none"),a("flex")}function u(e,t){document.querySelector(".popupproject").textContent=`${t}`,document.querySelector(".popup").style.display=e}function s(){const e=document.querySelector(".burger"),t=document.querySelector(".actions"),n=document.querySelector(".addedproject");e.classList.toggle("toggle"),e.classList.toggle("burger-active"),t.classList.toggle("actions-active"),n.classList.toggle("addedproject-active")}function m(e,t){let n=document.createElement("div");n.textContent=`Please insert ${e}`,n.className="alert alert-danger",document.querySelector(`${t}`).after(n)}function p(){let e=document.querySelectorAll(".alert-danger");e.length>0&&e.forEach((e=>{e.parentNode.removeChild(e)}))}let y,f=document.querySelector(".addproject"),v=document.querySelector(".projects");function S(e){let t=document.querySelector(".projectdiv");t.parentNode.removeChild(t),f.style.display="block"}function g(){if(0==y){let e=document.querySelector("h2"),t=this.firstChild.textContent;e.textContent=t,l("none"),a("flex"),r(),c(h[t])}else y=!1}function E(){document.querySelectorAll(".addedproject").forEach((e=>{e.parentNode.removeChild(e)}));for(let e in h)if("Current"!=e){let t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("button");t.innerHTML='<i class="fas fa-tasks"></i>',t.append(e),t.className="addedprojectleft",o.className="btn btn-close",o.setAttribute("data-delete",e),n.append(t,o),n.className="addedproject",v.insertBefore(n,f),n.addEventListener("click",g),o.addEventListener("click",b)}}function b(e){let t=e.target.getAttribute("data-delete");u("flex",t);let n=document.querySelector(".btnyes"),o=document.querySelector(".btnno"),r=document.querySelector(".popup__top .btn-close");n.addEventListener("click",q.bind(null,t)),r.addEventListener("click",(()=>{u("none")})),o.addEventListener("click",(function(){u("none")}))}function q(e){delete h[e],localStorage.setItem("projects",JSON.stringify(h)),y=!0,u("none"),E(),i()}function N(e){let t=document.getElementById("projectinput").value;(function(e){if(p(),!(e in h))return""!=e||(m("project","#projectinput"),!1);alert("Project already exists! Try different name!")})(t)&&(!function(e){h[e]=[],localStorage.setItem("projects",JSON.stringify(h)),r(),c(h[e])}(t),document.querySelector("h2").textContent=t,S(),E(),l("none"),a("flex"))}let h={Current:[]};if(document.querySelector(".addtaskform").addEventListener("submit",(function(e){e.preventDefault();let t=document.querySelector("#title"),n=document.querySelector("#description"),o=document.querySelector("#duedate"),d=document.querySelector("#priority"),i=document.querySelector("h2").textContent,u=function(e){let t=e.value;const n=dateFns.parse(t,"MM-dd-yyyy",new Date);return n<new Date?void alert("Invalid date! Task was already due!"):dateFns.distanceInWordsToNow(n,new Date)}(o),s=function(e,t,n,o){p();let r=0;return""==e.value&&(m("title","#title"),r+=1),""==t.value&&(m("description","#description"),r+=1),""==n.value&&(m("date","#duedate"),r+=1),"Select value"==o.value&&(m("priority","#priority"),r+=1),r}(t,n,o,d);0==s&&(function(e,t,n,o,r){let c=function(e,t,n,o){return{title:e,description:t,duedate:n,priority:o}}(e,t,n,o);h[r].push(c),localStorage.setItem("projects",JSON.stringify(h))}(t.value,n.value,u,d.value,i),t.value="",n.value="",o.value="",d.value="Select value",function(e){l("none"),a("flex"),r(),c(h[e])}(i))}),!1),document.querySelector(".addproject").addEventListener("click",(function(e){f.style.display="none";let t=document.createElement("div"),n=document.createElement("input");n.setAttribute("placeholder","Project name");let o=document.createElement("button");o.className="btnadd",o.textContent="Add";let r=document.createElement("button");r.className="btncancel",r.textContent="Cancel";let c=document.createElement("div");c.className="btndiv",c.append(o,r),n.setAttribute("type","text"),n.setAttribute("id","projectinput"),t.className="projectdiv",t.append(n,c),v.append(t),o.addEventListener("click",N),r.addEventListener("click",S)}),!1),document.querySelector(".current").addEventListener("click",i,!1),document.querySelector(".burger").addEventListener("click",(function(){const e=document.querySelector(".burger");document.querySelector(".actions"),e.addEventListener("click",s)}),!1),function(e){var t;try{t=window[e];var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}("localStorage"))if(localStorage.getItem("projects")){let e=localStorage.getItem("projects");h=JSON.parse(e),E(),c(h.Current)}else c()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RkFGLEVBQVExRyxRQUFRNEcsRUFBR0EsR0FDbkJGLEVBQVFHLFdBQVdELElBQ1osRUFDUCxNQUFPekgsR0FDUCxPQUNFQSxhQUFhMkgsZUFFRCxLQUFYM0gsRUFBRTRILE1BRVUsT0FBWDVILEVBQUU0SCxNQUdTLHVCQUFYNUgsRUFBRTZILE1BRVMsK0JBQVg3SCxFQUFFNkgsT0FFSk4sR0FDbUIsSUFBbkJBLEVBQVF2RixRQUtWOEYsQ0FBaUIsZ0JBQ25CLEdBQUlsSCxhQUFhbUgsUUFBUSxZQUFhLENBQ3BDLElBQUlDLEVBQWtCcEgsYUFBYW1ILFFBQVEsWUFDM0NySCxFQUFpQkksS0FBS3NGLE1BQU00QixHQUM1QnJELElBQ0FwRCxFQUFjYixFQUF3QixjQUV0Q2EsSyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG9saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG9saXN0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2NvbXBvbmVudHMvRE9NZnVuY3Rpb25zLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2NvbXBvbmVudHMvb2JqZWN0RnVuY3Rpb25zLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2NvbXBvbmVudHMvZm9ybVZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0RnVuY3Rpb25zLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2NvbXBvbmVudHMvaGFuZGxlRm9ybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IHJlbW92ZUZyb21PYmogfSBmcm9tIFwiLi9vYmplY3RGdW5jdGlvbnMuanNcIjtcclxuaW1wb3J0IHsgZGljdE9mUHJvamVjdHMgfSBmcm9tIFwiLi4vaW5kZXguanNcIjtcclxubGV0IHJlbW92ZWRFbGVtZW50ID0gZmFsc2U7XHJcblxyXG5mdW5jdGlvbiByZW1vdmVUb0RvKGUpIHtcclxuICBsZXQgcHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMlwiKS50ZXh0Q29udGVudDtcclxuICBsZXQgaW5kZXggPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWRlbGV0ZVwiKTtcclxuICBsZXQgdGFza3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpO1xyXG4gIGxldCB1cGRhdGVkRGljdCA9IHJlbW92ZUZyb21PYmoocHJvamVjdCwgaW5kZXgpO1xyXG5cclxuICB0YXNrcy5yZW1vdmVDaGlsZCh0YXNrcy5sYXN0Q2hpbGQpO1xyXG4gIHJlbW92ZWRFbGVtZW50ID0gdHJ1ZTtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLndyYXBwZXJcIikuZm9yRWFjaCgodGFzaykgPT4ge1xyXG4gICAgbGV0IHBhcmVudCA9IHRhc2sucGFyZW50Tm9kZTtcclxuICAgIHBhcmVudC5yZW1vdmVDaGlsZCh0YXNrKTtcclxuICB9KTtcclxuICBhZGRUYXNrVG9QYWdlKHVwZGF0ZWREaWN0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcm9sbERvd24oZSkge1xyXG4gIGlmIChyZW1vdmVkRWxlbWVudCA9PSBmYWxzZSkge1xyXG4gICAgbGV0IGVsZW1lbnQ7XHJcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09IFwiYWN0dWFsdGFza2RpdlwiKSB7XHJcbiAgICAgIGVsZW1lbnQgPSBlLnRhcmdldDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVsZW1lbnQgPSBlLnRhcmdldC5wYXJlbnROb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBkZXNjcmlwdGlvbkRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGVzY3JpcHRpb25kaXZcIik7XHJcblxyXG4gICAgbGV0IGluZGV4ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIpO1xyXG4gICAgaWYgKFxyXG4gICAgICBkZXNjcmlwdGlvbkRpdltpbmRleF0uc3R5bGUuZGlzcGxheSA9PSBcIlwiIHx8XHJcbiAgICAgIGRlc2NyaXB0aW9uRGl2W2luZGV4XS5zdHlsZS5kaXNwbGF5ID09IFwibm9uZVwiXHJcbiAgICApIHtcclxuICAgICAgZGVzY3JpcHRpb25EaXZbaW5kZXhdLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkZXNjcmlwdGlvbkRpdltpbmRleF0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICByZW1vdmVkRWxlbWVudCA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJUb0RvTGlzdCgpIHtcclxuICBsZXQgdGFza3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpO1xyXG4gIGlmICh0YXNrcy5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcclxuICAgIHdoaWxlICh0YXNrcy5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGFza3MucmVtb3ZlQ2hpbGQodGFza3MuZmlyc3RDaGlsZCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRUYXNrVG9QYWdlKHRhc2tMaXN0KSB7XHJcbiAgbGV0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKTtcclxuICBsZXQgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgbGV0IGJ1dHRvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgYnV0dG9uRGl2LmNsYXNzTmFtZSA9IFwiYnV0dG9uZGl2XCI7XHJcbiAgYWRkVGFza0J1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkVGFza1wiO1xyXG4gIGFkZFRhc2tCdXR0b24uY2xhc3NOYW1lID0gXCJhZGR0YXNrYnV0dG9uXCI7XHJcbiAgZm9yIChsZXQgaSBpbiB0YXNrTGlzdCkge1xyXG4gICAgbGV0IHdyYXBwZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHdyYXBwZXJEaXYuY2xhc3NOYW1lID0gXCJ3cmFwcGVyXCI7XHJcbiAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGRpdi5jbGFzc05hbWUgPSBcImFjdHVhbHRhc2tkaXZcIjtcclxuICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIsIGkpO1xyXG4gICAgbGV0IGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgIGNsb3NlQnRuLmNsYXNzTmFtZSA9IFwiYnRuLWNsb3NlXCI7XHJcbiAgICBjbG9zZUJ0bi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWRlbGV0ZVwiLCBgJHtpfWApO1xyXG5cclxuICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcm9sbERvd24pO1xyXG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbW92ZVRvRG8pO1xyXG4gICAgZm9yIChsZXQgaiBpbiB0YXNrTGlzdFtpXSkge1xyXG4gICAgICBpZiAoaiAhPSBcImRlc2NyaXB0aW9uXCIpIHtcclxuICAgICAgICBsZXQgZGl2Rm9yRWFjaEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGRpdkZvckVhY2hFbGVtZW50LmNsYXNzTmFtZSA9IFwiZGl2Zm9yZWFjaGVsZW1lbnRcIjtcclxuICAgICAgICBkaXZGb3JFYWNoRWxlbWVudC5hcHBlbmQodGFza0xpc3RbaV1bal0pO1xyXG4gICAgICAgIGRpdi5hcHBlbmQoZGl2Rm9yRWFjaEVsZW1lbnQsIGNsb3NlQnRuKTtcclxuICAgICAgICB3cmFwcGVyRGl2LmFwcGVuZChkaXYpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uRGl2LmNsYXNzTmFtZSA9IFwiZGVzY3JpcHRpb25kaXZcIjtcclxuICAgICAgICBkZXNjcmlwdGlvbkRpdi5pbm5lckhUTUwgPSBgPHNwYW4+RGVzY3JpcHRpb246IDwvc3Bhbj48cD4ke3Rhc2tMaXN0W2ldW2pdfTwvcD5gO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB3cmFwcGVyRGl2LmFwcGVuZChkZXNjcmlwdGlvbkRpdik7XHJcbiAgICB0YXNrcy5hcHBlbmQod3JhcHBlckRpdik7XHJcbiAgfVxyXG4gIGFkZFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhpZGVUYXNrcyk7XHJcbiAgYnV0dG9uRGl2LmFwcGVuZChhZGRUYXNrQnV0dG9uKTtcclxuICB0YXNrcy5hcHBlbmQoYnV0dG9uRGl2KTtcclxufVxyXG5cclxuLy8gLS0tLS0vL1xyXG5cclxuZnVuY3Rpb24gZGlzcGxheU9ySGlkZUZvcm0oYWN0aW9uKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2Rvc1wiKS5zdHlsZS5kaXNwbGF5ID0gYWN0aW9uO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5T3JIaWRlVG9EbyhhY3Rpb24pIHtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZGVkdG9kb1wiKS5zdHlsZS5kaXNwbGF5ID0gYWN0aW9uO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlVGFza3MoKSB7XHJcbiAgZGlzcGxheU9ySGlkZVRvRG8oXCJub25lXCIpO1xyXG4gIGRpc3BsYXlPckhpZGVGb3JtKFwiYmxvY2tcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc3BsYXlDdXJyZW50VGFza3MoKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImgyXCIpLnRleHRDb250ZW50ID0gXCJDdXJyZW50XCI7XHJcbiAgY2xlYXJUb0RvTGlzdCgpO1xyXG4gIGFkZFRhc2tUb1BhZ2UoZGljdE9mUHJvamVjdHNbXCJDdXJyZW50XCJdKTtcclxuICBkaXNwbGF5T3JIaWRlRm9ybShcIm5vbmVcIik7XHJcbiAgZGlzcGxheU9ySGlkZVRvRG8oXCJmbGV4XCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQb3BVcChhY3Rpb24sIGtleSkge1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBwcm9qZWN0XCIpLnRleHRDb250ZW50ID0gYCR7a2V5fWA7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKS5zdHlsZS5kaXNwbGF5ID0gYWN0aW9uO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVDbGFzc2VzKCkge1xyXG4gIGNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyXCIpO1xyXG4gIGNvbnN0IGFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjdGlvbnNcIik7XHJcbiAgY29uc3QgYWRkZWRQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRlZHByb2plY3RcIik7XHJcbiAgYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJ0b2dnbGVcIik7XHJcbiAgYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJidXJnZXItYWN0aXZlXCIpO1xyXG4gIGFjdGlvbnMuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGlvbnMtYWN0aXZlXCIpO1xyXG4gIGFkZGVkUHJvamVjdC5jbGFzc0xpc3QudG9nZ2xlKFwiYWRkZWRwcm9qZWN0LWFjdGl2ZVwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlQnVyZ2VyQnV0dG9uKCkge1xyXG4gIGNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyXCIpO1xyXG4gIGNvbnN0IGFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjdGlvbnNcIik7XHJcbiAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVDbGFzc2VzKTtcclxufVxyXG5cclxuLy8tLS8vXHJcblxyXG5leHBvcnQge1xyXG4gIGRpc3BsYXlPckhpZGVGb3JtLFxyXG4gIGFkZFRhc2tUb1BhZ2UsXHJcbiAgZGlzcGxheU9ySGlkZVRvRG8sXHJcbiAgY2xlYXJUb0RvTGlzdCxcclxuICBkaXNwbGF5Q3VycmVudFRhc2tzLFxyXG4gIGhhbmRsZVBvcFVwLFxyXG4gIHRvZ2dsZUJ1cmdlckJ1dHRvbixcclxufTtcclxuIiwiaW1wb3J0IHsgZGljdE9mUHJvamVjdHMgfSBmcm9tIFwiLi4vaW5kZXguanNcIjtcclxuXHJcbi8vIENyZWF0ZSBvYmplY3QgZnJvbSB2YWx1ZXMgZnJvbSBGb3JtLCBhZGQgdGhlbSB0byB0aGUgbGlzdFxyXG5mdW5jdGlvbiBjcmVhdGVPYmplY3QodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVkYXRlLCBwcmlvcml0eSkge1xyXG4gIHJldHVybiB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlZGF0ZSwgcHJpb3JpdHkgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9kb09iaih0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZWRhdGUsIHByaW9yaXR5LCB3aGljaFByb2plY3QpIHtcclxuICBsZXQgb2JqID0gY3JlYXRlT2JqZWN0KHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlZGF0ZSwgcHJpb3JpdHkpO1xyXG4gIGRpY3RPZlByb2plY3RzW3doaWNoUHJvamVjdF0ucHVzaChvYmopO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoZGljdE9mUHJvamVjdHMpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlRnJvbU9iaihwcm9qZWN0LCBpbmRleCkge1xyXG4gIGRpY3RPZlByb2plY3RzW3Byb2plY3RdLnNwbGljZShpbmRleCwgMSk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShkaWN0T2ZQcm9qZWN0cykpO1xyXG4gIHJldHVybiBkaWN0T2ZQcm9qZWN0c1twcm9qZWN0XTtcclxufVxyXG5cclxuZXhwb3J0IHsgdG9kb09iaiwgcmVtb3ZlRnJvbU9iaiB9O1xyXG4iLCJpbXBvcnQgeyBkaWN0T2ZQcm9qZWN0cyB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xyXG4vLyBWYWxpZGF0aW9uIG9mIEZvcm0sIGFuZCBkaXNwbGF5aW5nIGFuZCByZW1vdmluZyBhbGVydC1kYW5nZXIgZGl2XHJcblxyXG5mdW5jdGlvbiBhZGRXYXJuaW5nKG5vZGVOYW1lLCBzZWxlY3Rvcikge1xyXG4gIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRpdi50ZXh0Q29udGVudCA9IGBQbGVhc2UgaW5zZXJ0ICR7bm9kZU5hbWV9YDtcclxuICBkaXYuY2xhc3NOYW1lID0gXCJhbGVydCBhbGVydC1kYW5nZXJcIjtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3NlbGVjdG9yfWApLmFmdGVyKGRpdik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlUHJvamVjdEZvcm0ocHJvamVjdElucHV0KSB7XHJcbiAgY2hlY2tJZkRhbmdlckRpc3BsYXllZCgpO1xyXG4gIGlmIChwcm9qZWN0SW5wdXQgaW4gZGljdE9mUHJvamVjdHMpIHtcclxuICAgIGFsZXJ0KFwiUHJvamVjdCBhbHJlYWR5IGV4aXN0cyEgVHJ5IGRpZmZlcmVudCBuYW1lIVwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYgKHByb2plY3RJbnB1dCA9PSBcIlwiKSB7XHJcbiAgICBhZGRXYXJuaW5nKFwicHJvamVjdFwiLCBcIiNwcm9qZWN0aW5wdXRcIik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0lmRGFuZ2VyRGlzcGxheWVkKCkge1xyXG4gIGxldCBkYW5nZXJBbHJlYWR5RGlzcGxheWVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbGVydC1kYW5nZXJcIik7XHJcbiAgaWYgKGRhbmdlckFscmVhZHlEaXNwbGF5ZWQubGVuZ3RoID4gMCkge1xyXG4gICAgZGFuZ2VyQWxyZWFkeURpc3BsYXllZC5mb3JFYWNoKChkaXYpID0+IHtcclxuICAgICAgZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGl2KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVEYXRhKHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpIHtcclxuICBjaGVja0lmRGFuZ2VyRGlzcGxheWVkKCk7XHJcblxyXG4gIGxldCBpbnZhbGlkID0gMDtcclxuICBpZiAodGl0bGUudmFsdWUgPT0gXCJcIikge1xyXG4gICAgYWRkV2FybmluZyhcInRpdGxlXCIsIFwiI3RpdGxlXCIpO1xyXG4gICAgaW52YWxpZCArPSAxO1xyXG4gIH1cclxuICBpZiAoZGVzY3JpcHRpb24udmFsdWUgPT0gXCJcIikge1xyXG4gICAgYWRkV2FybmluZyhcImRlc2NyaXB0aW9uXCIsIFwiI2Rlc2NyaXB0aW9uXCIpO1xyXG4gICAgaW52YWxpZCArPSAxO1xyXG4gIH1cclxuICBpZiAoZGF0ZS52YWx1ZSA9PSBcIlwiKSB7XHJcbiAgICBhZGRXYXJuaW5nKFwiZGF0ZVwiLCBcIiNkdWVkYXRlXCIpO1xyXG4gICAgaW52YWxpZCArPSAxO1xyXG4gIH1cclxuICBpZiAocHJpb3JpdHkudmFsdWUgPT0gXCJTZWxlY3QgdmFsdWVcIikge1xyXG4gICAgYWRkV2FybmluZyhcInByaW9yaXR5XCIsIFwiI3ByaW9yaXR5XCIpO1xyXG4gICAgaW52YWxpZCArPSAxO1xyXG4gIH1cclxuICByZXR1cm4gaW52YWxpZDtcclxufVxyXG5cclxuZXhwb3J0IHsgdmFsaWRhdGVEYXRhLCB2YWxpZGF0ZVByb2plY3RGb3JtIH07XHJcbiIsImltcG9ydCB7IHZhbGlkYXRlUHJvamVjdEZvcm0gfSBmcm9tIFwiLi9mb3JtVmFsaWRhdGlvbi5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGFkZFRhc2tUb1BhZ2UsXHJcbiAgZGlzcGxheU9ySGlkZUZvcm0sXHJcbiAgZGlzcGxheU9ySGlkZVRvRG8sXHJcbiAgY2xlYXJUb0RvTGlzdCxcclxuICBkaXNwbGF5Q3VycmVudFRhc2tzLFxyXG4gIGhhbmRsZVBvcFVwLFxyXG59IGZyb20gXCIuL0RPTWZ1bmN0aW9ucy5qc1wiO1xyXG5pbXBvcnQgeyBkaWN0T2ZQcm9qZWN0cyB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xyXG5cclxubGV0IGFkZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZHByb2plY3RcIik7XHJcbmxldCBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIik7XHJcblxyXG5mdW5jdGlvbiBoaWRlQWRkUHJvamVjdChlKSB7XHJcbiAgbGV0IHByb2plY3RkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RkaXZcIik7XHJcbiAgcHJvamVjdGRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHByb2plY3RkaXYpO1xyXG4gIGFkZFByb2plY3Quc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTGlzdChwcm9qZWN0TmFtZSkge1xyXG4gIGRpY3RPZlByb2plY3RzW3Byb2plY3ROYW1lXSA9IFtdO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoZGljdE9mUHJvamVjdHMpKTtcclxuICBjbGVhclRvRG9MaXN0KCk7XHJcbiAgYWRkVGFza1RvUGFnZShkaWN0T2ZQcm9qZWN0c1twcm9qZWN0TmFtZV0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93VGFza3NJblByb2plY3QoKSB7XHJcbiAgaWYgKHJlbW92ZWRQcm9qZWN0ID09IGZhbHNlKSB7XHJcbiAgICBsZXQgbmFtZU9mUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMlwiKTtcclxuICAgIGxldCBwcm9qZWN0TmFtZSA9IHRoaXMuZmlyc3RDaGlsZC50ZXh0Q29udGVudDtcclxuICAgIG5hbWVPZlByb2plY3QudGV4dENvbnRlbnQgPSBwcm9qZWN0TmFtZTtcclxuICAgIGRpc3BsYXlPckhpZGVGb3JtKFwibm9uZVwiKTtcclxuICAgIGRpc3BsYXlPckhpZGVUb0RvKFwiZmxleFwiKTtcclxuICAgIGNsZWFyVG9Eb0xpc3QoKTtcclxuICAgIGFkZFRhc2tUb1BhZ2UoZGljdE9mUHJvamVjdHNbcHJvamVjdE5hbWVdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVtb3ZlZFByb2plY3QgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIHRoaXMgc2hvd3MgYWxsIHByb2plY3RzIGluIHRoZSBzaWRlYmFyXHJcbmZ1bmN0aW9uIHNob3dQcm9qZWN0cygpIHtcclxuICByZW1vdmVQcm9qZWN0c0Zyb21ET00oKTtcclxuICBmb3IgKGxldCBrZXkgaW4gZGljdE9mUHJvamVjdHMpIHtcclxuICAgIGlmIChrZXkgIT0gXCJDdXJyZW50XCIpIHtcclxuICAgICAgbGV0IGFkZGVkUHJvamVjdExlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBsZXQgYWRkZWRQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgbGV0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgIGFkZGVkUHJvamVjdExlZnQuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmFzIGZhLXRhc2tzXCI+PC9pPmA7XHJcbiAgICAgIGFkZGVkUHJvamVjdExlZnQuYXBwZW5kKGtleSk7XHJcbiAgICAgIGFkZGVkUHJvamVjdExlZnQuY2xhc3NOYW1lID0gXCJhZGRlZHByb2plY3RsZWZ0XCI7XHJcbiAgICAgIGJ0bi5jbGFzc05hbWUgPSBcImJ0biBidG4tY2xvc2VcIjtcclxuICAgICAgYnRuLnNldEF0dHJpYnV0ZShcImRhdGEtZGVsZXRlXCIsIGtleSk7XHJcbiAgICAgIGFkZGVkUHJvamVjdC5hcHBlbmQoYWRkZWRQcm9qZWN0TGVmdCwgYnRuKTtcclxuICAgICAgYWRkZWRQcm9qZWN0LmNsYXNzTmFtZSA9IFwiYWRkZWRwcm9qZWN0XCI7XHJcbiAgICAgIHByb2plY3RzLmluc2VydEJlZm9yZShhZGRlZFByb2plY3QsIGFkZFByb2plY3QpO1xyXG4gICAgICBhZGRlZFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dUYXNrc0luUHJvamVjdCk7XHJcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGlzcGF5UG9wVXApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxubGV0IHJlbW92ZWRQcm9qZWN0O1xyXG4vL3RoaXMgZnVuY3Rpb24gZGVsZXRlIHRvZG8gb2JqIGZyb20gcHJvamVjdCBvYmpcclxuZnVuY3Rpb24gZGlzcGF5UG9wVXAoZSkge1xyXG4gIGxldCBrZXkgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWRlbGV0ZVwiKTtcclxuICBoYW5kbGVQb3BVcChcImZsZXhcIiwga2V5KTtcclxuICBsZXQgYnRuWWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG55ZXNcIik7XHJcbiAgbGV0IGJ0bk5vID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5ub1wiKTtcclxuICBsZXQgYnRuQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190b3AgLmJ0bi1jbG9zZVwiKTtcclxuXHJcbiAgYnRuWWVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZWxldGVGcm9tT2JqRGljdC5iaW5kKG51bGwsIGtleSkpO1xyXG5cclxuICBidG5DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaGFuZGxlUG9wVXAoXCJub25lXCIpO1xyXG4gIH0pO1xyXG5cclxuICBidG5Oby5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgaGFuZGxlUG9wVXAoXCJub25lXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVGcm9tT2JqRGljdChrZXkpIHtcclxuICBkZWxldGUgZGljdE9mUHJvamVjdHNba2V5XTtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGRpY3RPZlByb2plY3RzKSk7XHJcbiAgcmVtb3ZlZFByb2plY3QgPSB0cnVlO1xyXG4gIGhhbmRsZVBvcFVwKFwibm9uZVwiKTtcclxuICBzaG93UHJvamVjdHMoKTtcclxuICBkaXNwbGF5Q3VycmVudFRhc2tzKCk7XHJcbn1cclxuXHJcbi8vIHRoaXMgZnVuY3Rpb24gcmVtb3ZlcyBwcm9qZWN0IGZyb20gRE9NXHJcbmZ1bmN0aW9uIHJlbW92ZVByb2plY3RzRnJvbURPTSgpIHtcclxuICBsZXQgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFkZGVkcHJvamVjdFwiKTtcclxuICBwcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XHJcbiAgICBwcm9qZWN0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocHJvamVjdCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFByb2plY3RUb0RPTShlKSB7XHJcbiAgbGV0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0aW5wdXRcIikudmFsdWU7XHJcbiAgaWYgKHZhbGlkYXRlUHJvamVjdEZvcm0ocHJvamVjdE5hbWUpKSB7XHJcbiAgICBjcmVhdGVMaXN0KHByb2plY3ROYW1lKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMlwiKS50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xyXG4gICAgaGlkZUFkZFByb2plY3QoKTtcclxuICAgIHNob3dQcm9qZWN0cygpO1xyXG4gICAgZGlzcGxheU9ySGlkZUZvcm0oXCJub25lXCIpO1xyXG4gICAgZGlzcGxheU9ySGlkZVRvRG8oXCJmbGV4XCIpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gVGhpcyBmdW5jdGlvbiBpcyBzaG93aW5nIHRoYXQgYWRkIHByb2plY3QgZm9ybSBvbiB0aGUgc2lkZVxyXG5mdW5jdGlvbiBhZGRRdWVyeShlKSB7XHJcbiAgYWRkUHJvamVjdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG4gIGxldCBkaXZQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBsZXQgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgaW5wdXQuc2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgXCJQcm9qZWN0IG5hbWVcIik7XHJcblxyXG4gIGxldCBidG5BZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGJ0bkFkZC5jbGFzc05hbWUgPSBcImJ0bmFkZFwiO1xyXG4gIGJ0bkFkZC50ZXh0Q29udGVudCA9IFwiQWRkXCI7XHJcbiAgbGV0IGJ0bkNhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnRuQ2FuY2VsLmNsYXNzTmFtZSA9IFwiYnRuY2FuY2VsXCI7XHJcbiAgYnRuQ2FuY2VsLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcclxuICBsZXQgYnRuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBidG5EaXYuY2xhc3NOYW1lID0gXCJidG5kaXZcIjtcclxuICBidG5EaXYuYXBwZW5kKGJ0bkFkZCwgYnRuQ2FuY2VsKTtcclxuXHJcbiAgaW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XHJcbiAgaW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0aW5wdXRcIik7XHJcblxyXG4gIGRpdlByb2plY3QuY2xhc3NOYW1lID0gXCJwcm9qZWN0ZGl2XCI7XHJcbiAgZGl2UHJvamVjdC5hcHBlbmQoaW5wdXQsIGJ0bkRpdik7XHJcbiAgcHJvamVjdHMuYXBwZW5kKGRpdlByb2plY3QpO1xyXG4gIGJ0bkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkUHJvamVjdFRvRE9NKTtcclxuICBidG5DYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhpZGVBZGRQcm9qZWN0KTtcclxufVxyXG5cclxuZXhwb3J0IHsgYWRkUXVlcnksIHNob3dQcm9qZWN0cyB9O1xyXG4iLCIvLyBpbXBvcnQgXCIuL3N0eWxlLmNzc1wiO1xyXG5pbXBvcnQgeyBnZXRWYWx1ZXMgfSBmcm9tIFwiLi9jb21wb25lbnRzL2hhbmRsZUZvcm0uanNcIjtcclxuaW1wb3J0IHsgYWRkUXVlcnkgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Byb2plY3RGdW5jdGlvbnMuanNcIjtcclxuaW1wb3J0IHtcclxuICBkaXNwbGF5Q3VycmVudFRhc2tzLFxyXG4gIGFkZFRhc2tUb1BhZ2UsXHJcbiAgdG9nZ2xlQnVyZ2VyQnV0dG9uLFxyXG59IGZyb20gXCIuL2NvbXBvbmVudHMvRE9NZnVuY3Rpb25zLmpzXCI7XHJcbmltcG9ydCB7IHNob3dQcm9qZWN0cyB9IGZyb20gXCIuL2NvbXBvbmVudHMvcHJvamVjdEZ1bmN0aW9ucy5qc1wiO1xyXG5pbXBvcnQgXCIuL3N0eWxlLmNzc1wiO1xyXG5cclxubGV0IGRpY3RPZlByb2plY3RzID0ge307XHJcbmRpY3RPZlByb2plY3RzW1wiQ3VycmVudFwiXSA9IFtdO1xyXG5sZXQgYWRkdGFza2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZHRhc2tmb3JtXCIpO1xyXG5hZGR0YXNrZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGdldFZhbHVlcywgZmFsc2UpO1xyXG5cclxubGV0IGFkZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZHByb2plY3RcIik7XHJcbmFkZFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFkZFF1ZXJ5LCBmYWxzZSk7XHJcblxyXG5sZXQgY3VycmVudFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmN1cnJlbnRcIik7XHJcbmN1cnJlbnRUYXNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkaXNwbGF5Q3VycmVudFRhc2tzLCBmYWxzZSk7XHJcblxyXG5sZXQgYnVyZ2VyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbmJ1cmdlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlQnVyZ2VyQnV0dG9uLCBmYWxzZSk7XHJcblxyXG5mdW5jdGlvbiBzdG9yYWdlQXZhaWxhYmxlKHR5cGUpIHtcclxuICB2YXIgc3RvcmFnZTtcclxuICB0cnkge1xyXG4gICAgc3RvcmFnZSA9IHdpbmRvd1t0eXBlXTtcclxuICAgIHZhciB4ID0gXCJfX3N0b3JhZ2VfdGVzdF9fXCI7XHJcbiAgICBzdG9yYWdlLnNldEl0ZW0oeCwgeCk7XHJcbiAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBlIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uICYmXHJcbiAgICAgIC8vIGV2ZXJ5dGhpbmcgZXhjZXB0IEZpcmVmb3hcclxuICAgICAgKGUuY29kZSA9PT0gMjIgfHxcclxuICAgICAgICAvLyBGaXJlZm94XHJcbiAgICAgICAgZS5jb2RlID09PSAxMDE0IHx8XHJcbiAgICAgICAgLy8gdGVzdCBuYW1lIGZpZWxkIHRvbywgYmVjYXVzZSBjb2RlIG1pZ2h0IG5vdCBiZSBwcmVzZW50XHJcbiAgICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxyXG4gICAgICAgIGUubmFtZSA9PT0gXCJRdW90YUV4Y2VlZGVkRXJyb3JcIiB8fFxyXG4gICAgICAgIC8vIEZpcmVmb3hcclxuICAgICAgICBlLm5hbWUgPT09IFwiTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRURcIikgJiZcclxuICAgICAgLy8gYWNrbm93bGVkZ2UgUXVvdGFFeGNlZWRlZEVycm9yIG9ubHkgaWYgdGhlcmUncyBzb21ldGhpbmcgYWxyZWFkeSBzdG9yZWRcclxuICAgICAgc3RvcmFnZSAmJlxyXG4gICAgICBzdG9yYWdlLmxlbmd0aCAhPT0gMFxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmlmIChzdG9yYWdlQXZhaWxhYmxlKFwibG9jYWxTdG9yYWdlXCIpKSB7XHJcbiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHJvamVjdHNcIikpIHtcclxuICAgIGxldCByZXRyaWV2ZWRPYmplY3QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RzXCIpO1xyXG4gICAgZGljdE9mUHJvamVjdHMgPSBKU09OLnBhcnNlKHJldHJpZXZlZE9iamVjdCk7XHJcbiAgICBzaG93UHJvamVjdHMoZGljdE9mUHJvamVjdHMpO1xyXG4gICAgYWRkVGFza1RvUGFnZShkaWN0T2ZQcm9qZWN0c1tcIkN1cnJlbnRcIl0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhZGRUYXNrVG9QYWdlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBkaWN0T2ZQcm9qZWN0cyB9O1xyXG4iLCJpbXBvcnQgeyB0b2RvT2JqIH0gZnJvbSBcIi4vb2JqZWN0RnVuY3Rpb25zLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgZGlzcGxheU9ySGlkZUZvcm0sXHJcbiAgYWRkVGFza1RvUGFnZSxcclxuICBkaXNwbGF5T3JIaWRlVG9EbyxcclxuICBjbGVhclRvRG9MaXN0LFxyXG59IGZyb20gXCIuL0RPTWZ1bmN0aW9ucy5qc1wiO1xyXG5pbXBvcnQgeyBkaWN0T2ZQcm9qZWN0cyB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xyXG5pbXBvcnQgeyB2YWxpZGF0ZURhdGEgfSBmcm9tIFwiLi9mb3JtVmFsaWRhdGlvbi5qc1wiO1xyXG5cclxuZnVuY3Rpb24gY2FsbERPTWZ1bmN0aW9ucyhwcm9qZWN0TmFtZSkge1xyXG4gIGRpc3BsYXlPckhpZGVGb3JtKFwibm9uZVwiKTtcclxuICBkaXNwbGF5T3JIaWRlVG9EbyhcImZsZXhcIik7XHJcbiAgY2xlYXJUb0RvTGlzdCgpO1xyXG5cclxuICBhZGRUYXNrVG9QYWdlKGRpY3RPZlByb2plY3RzW3Byb2plY3ROYW1lXSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURhdGUoZHVlRGF0ZSkge1xyXG4gIGxldCBzZWxlY3RlZERhdGUgPSBkdWVEYXRlLnZhbHVlO1xyXG4gIGNvbnN0IGRhdGUgPSBkYXRlRm5zLnBhcnNlKHNlbGVjdGVkRGF0ZSwgXCJNTS1kZC15eXl5XCIsIG5ldyBEYXRlKCkpO1xyXG4gIGlmIChkYXRlIDwgbmV3IERhdGUoKSkge1xyXG4gICAgYWxlcnQoXCJJbnZhbGlkIGRhdGUhIFRhc2sgd2FzIGFscmVhZHkgZHVlIVwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgcmVzdWx0ID0gZGF0ZUZucy5kaXN0YW5jZUluV29yZHNUb05vdyhkYXRlLCBuZXcgRGF0ZSgpKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRWYWx1ZXMoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpO1xyXG4gIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIik7XHJcbiAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2R1ZWRhdGVcIik7XHJcbiAgbGV0IHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmlvcml0eVwiKTtcclxuICBsZXQgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaDJcIikudGV4dENvbnRlbnQ7XHJcblxyXG4gIC8vIENyZWF0ZSBvYmplY3QgZnJvbSB0aGVzZSB2YWx1ZXMgYW5kIGFkZCB0aGVtIHRvIHRoZSBsaXN0XHJcbiAgbGV0IGRhdGUgPSBoYW5kbGVEYXRlKGR1ZURhdGUpO1xyXG4gIGxldCBpbnZhbGlkID0gdmFsaWRhdGVEYXRhKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgc2VsZWN0ZWQpO1xyXG4gIGlmIChpbnZhbGlkID09IDApIHtcclxuICAgIHRvZG9PYmoodGl0bGUudmFsdWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBkYXRlLCBzZWxlY3RlZC52YWx1ZSwgcHJvamVjdE5hbWUpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB0aXRsZS52YWx1ZSA9IFwiXCI7XHJcbiAgZGVzY3JpcHRpb24udmFsdWUgPSBcIlwiO1xyXG4gIGR1ZURhdGUudmFsdWUgPSBcIlwiO1xyXG4gIHNlbGVjdGVkLnZhbHVlID0gXCJTZWxlY3QgdmFsdWVcIjtcclxuICBjYWxsRE9NZnVuY3Rpb25zKHByb2plY3ROYW1lKTtcclxufVxyXG5cclxuZXhwb3J0IHsgZ2V0VmFsdWVzIH07XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInJlbW92ZWRFbGVtZW50IiwicmVtb3ZlVG9EbyIsImUiLCJwcm9qZWN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJpbmRleCIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsInRhc2tzIiwidXBkYXRlZERpY3QiLCJkaWN0T2ZQcm9qZWN0cyIsInNwbGljZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicmVtb3ZlRnJvbU9iaiIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJ0YXNrIiwicGFyZW50Tm9kZSIsImFkZFRhc2tUb1BhZ2UiLCJyb2xsRG93biIsImVsZW1lbnQiLCJjbGFzc05hbWUiLCJkZXNjcmlwdGlvbkRpdiIsInN0eWxlIiwiZGlzcGxheSIsImNsZWFyVG9Eb0xpc3QiLCJjaGlsZE5vZGVzIiwibGVuZ3RoIiwiZmlyc3RDaGlsZCIsInRhc2tMaXN0IiwiYWRkVGFza0J1dHRvbiIsImNyZWF0ZUVsZW1lbnQiLCJidXR0b25EaXYiLCJpIiwid3JhcHBlckRpdiIsImRpdiIsInNldEF0dHJpYnV0ZSIsImNsb3NlQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImoiLCJkaXZGb3JFYWNoRWxlbWVudCIsImFwcGVuZCIsImlubmVySFRNTCIsImhpZGVUYXNrcyIsImRpc3BsYXlPckhpZGVGb3JtIiwiYWN0aW9uIiwiZGlzcGxheU9ySGlkZVRvRG8iLCJkaXNwbGF5Q3VycmVudFRhc2tzIiwiaGFuZGxlUG9wVXAiLCJ0b2dnbGVDbGFzc2VzIiwiYnVyZ2VyIiwiYWN0aW9ucyIsImFkZGVkUHJvamVjdCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImFkZFdhcm5pbmciLCJub2RlTmFtZSIsInNlbGVjdG9yIiwiYWZ0ZXIiLCJjaGVja0lmRGFuZ2VyRGlzcGxheWVkIiwiZGFuZ2VyQWxyZWFkeURpc3BsYXllZCIsInJlbW92ZWRQcm9qZWN0IiwiYWRkUHJvamVjdCIsInByb2plY3RzIiwiaGlkZUFkZFByb2plY3QiLCJwcm9qZWN0ZGl2Iiwic2hvd1Rhc2tzSW5Qcm9qZWN0IiwibmFtZU9mUHJvamVjdCIsInByb2plY3ROYW1lIiwidGhpcyIsInNob3dQcm9qZWN0cyIsImFkZGVkUHJvamVjdExlZnQiLCJidG4iLCJpbnNlcnRCZWZvcmUiLCJkaXNwYXlQb3BVcCIsImJ0blllcyIsImJ0bk5vIiwiYnRuQ2xvc2UiLCJkZWxldGVGcm9tT2JqRGljdCIsImJpbmQiLCJhZGRQcm9qZWN0VG9ET00iLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwicHJvamVjdElucHV0IiwiYWxlcnQiLCJ2YWxpZGF0ZVByb2plY3RGb3JtIiwiY3JlYXRlTGlzdCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJzZWxlY3RlZCIsImRhdGUiLCJzZWxlY3RlZERhdGUiLCJkYXRlRm5zIiwicGFyc2UiLCJEYXRlIiwiZGlzdGFuY2VJbldvcmRzVG9Ob3ciLCJoYW5kbGVEYXRlIiwiaW52YWxpZCIsInByaW9yaXR5IiwidmFsaWRhdGVEYXRhIiwiZHVlZGF0ZSIsIndoaWNoUHJvamVjdCIsImNyZWF0ZU9iamVjdCIsInB1c2giLCJ0b2RvT2JqIiwiY2FsbERPTWZ1bmN0aW9ucyIsImRpdlByb2plY3QiLCJpbnB1dCIsImJ0bkFkZCIsImJ0bkNhbmNlbCIsImJ0bkRpdiIsInR5cGUiLCJzdG9yYWdlIiwid2luZG93IiwieCIsInJlbW92ZUl0ZW0iLCJET01FeGNlcHRpb24iLCJjb2RlIiwibmFtZSIsInN0b3JhZ2VBdmFpbGFibGUiLCJnZXRJdGVtIiwicmV0cmlldmVkT2JqZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==